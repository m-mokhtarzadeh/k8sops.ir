[{"content":"k8sops Document Session 1 Session 6 ","date":1670772375,"description":"Kubernetes Operations Fundamentals","lastmod":"2022-12-11T15:26:15Z","objectID":"3976528693a0108357f4928017600865","permalink":"https://k8sops.ir/","publishdate":"2022-12-11T15:26:15Z","title":"Home"},{"content":"Session 1 Content Create Lab with Vagrant Create Lab from OVA file Create Lab from Scratch on Oracle Linux Create Lab from Scratch on Ubuntu ","date":1673714220,"description":"Kubernetes Operations Fundamentals","lastmod":"2023-01-14T16:37:00Z","objectID":"45e4590347d9090fe60a0691a7cebee9","permalink":"https://k8sops.ir/session1/","publishdate":"2023-01-14T16:37:00Z","title":"Session 1"},{"content":"Step 0: You need virtualbox installed on your system Donwload virutalbox from following link.\nVirtualbox Download Page\nStep 1: Download k8sops virtualbox ova Download ova file from following link.\nClick Here to Go to Start Download\n","date":1670772375,"description":"Kubernetes Operations Fundamentals","lastmod":"2022-12-11T15:26:15Z","objectID":"f663d2a9cb34e667403784f1a911c2de","permalink":"https://k8sops.ir/session1/ova/","publishdate":"2022-12-11T15:26:15Z","title":"Create Lab with OVA file"},{"content":"Step 1: Download oracle linux 8 Download oracle linux 8 from following repository:\nOracle Linux download repository\nStep 2: Install dependencies Install following dependencies:\ndnf install -y iproute-tc vim Step 3: Disable firewall Disable firewall:\nsystemctl stop firewalld systemctl disable firewalld systemctl mask firewalld Step 4: Disable selinux Disable selinux:\nsed -i s/^SELINUX=.*$/SELINUX=disabled/ /etc/selinux/config Step 5: Update system packages Update system packages with following command:\ndnf update Step 6: Install latest version of docker Add docker repository to server package repository:\nsudo dnf config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo Install docker packages:\nsudo dnf install docker-ce docker-ce-cli containerd.io Enable and start docker service with following commands:\nsudo systemctl start docker sudo systemctl enable docker sudo systemctl status docker Step 7: Pull images for required hands-on lab docker pull hello-world docker pull ubuntu docker pull nginx docker pull php:7-apache Step 8: Configuring Docker for kubernetes installation cat \u0026amp;lt;\u0026amp;lt;EOF | sudo tee /etc/docker/daemon.json { \u0026amp;#34;exec-opts\u0026amp;#34;: [\u0026amp;#34;native.cgroupdriver=systemd\u0026amp;#34;], \u0026amp;#34;log-driver\u0026amp;#34;: \u0026amp;#34;json-file\u0026amp;#34;, \u0026amp;#34;log-opts\u0026amp;#34;: { \u0026amp;#34;max-size\u0026amp;#34;: \u0026amp;#34;100m\u0026amp;#34; }, \u0026amp;#34;storage-driver\u0026amp;#34;: \u0026amp;#34;overlay2\u0026amp;#34;, \u0026amp;#34;storage-opts\u0026amp;#34;: [ \u0026amp;#34;overlay2.override_kernel_check=true\u0026amp;#34; ] } EOF systemctl restart docker Step 9: Configuring System for kubernetes installation cat \u0026amp;lt;\u0026amp;lt;EOF | sudo tee /etc/modules-load.d/k8s.conf overlay br_netfilter EOF sudo modprobe overlay sudo modprobe br_netfilter cat \u0026amp;lt;\u0026amp;lt; EOF \u0026amp;gt; /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 fs.file-max = 1500000 fs.nr_open = 1500000 vm.max_map_count = 262144 net.ipv4.ip_local_reserved_ports = 30000-32767 net.ipv4.ip_local_port_range = 1024 65535 net.netfilter.nf_conntrack_max = 32768000 …","date":1670772375,"description":"Kubernetes Operations Fundamentals","lastmod":"2022-12-11T15:26:15Z","objectID":"e5a5f3012b86e5257b8d178dc9c45f82","permalink":"https://k8sops.ir/session1/scratch/","publishdate":"2022-12-11T15:26:15Z","title":"Create Lab from scratch on oracle linux"},{"content":"Step 1: Download ubuntu linux 22.04 Download ubuntu 22.04 from following repository:\nUbuntu Linux download repository\nStep 2: Install dependencies Install following dependencies:\napt install apt install -y vim Step 3: Disable firewall Disable firewall:\nufw disable Step 4: Disable apparmor Disable apparmor:\nsystemctl stop apparmor systemctl disable apparmor systemctl mask apparmor Step 5: Update system packages Update system packages with following command:\napt update apt upgrade Install requirements with following command:\nsudo apt install \\ ca-certificates \\ curl \\ gnupg \\ lsb-release Step 6: Install latest version of docker Add docker repository to server package repository:\nsudo mkdir -p /etc/apt/keyrings curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg echo \\ \u0026amp;#34;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) stable\u0026amp;#34; | sudo tee /etc/apt/sources.list.d/docker.list \u0026amp;gt; /dev/null Install docker packages:\nsudo apt update sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin Enable and start docker service with following commands:\nsudo systemctl start docker sudo systemctl enable docker sudo systemctl status docker Step 7: Pull images for required hands-on lab docker pull hello-world docker pull ubuntu docker pull nginx docker pull php:7-apache Step 8: Configuring Docker for kubernetes installation cat \u0026amp;lt;\u0026amp;lt;EOF | sudo tee /etc/docker/daemon.json { \u0026amp;#34;exec-opts\u0026amp;#34;: [\u0026amp;#34;native.cgroupdriver=systemd\u0026amp;#34;], \u0026amp;#34;log-driver\u0026amp;#34;: \u0026amp;#34;json-file\u0026amp;#34;, \u0026amp;#34;log-opts\u0026amp;#34;: { \u0026amp;#34;max-size\u0026amp;#34;: \u0026amp;#34;100m\u0026amp;#34; }, \u0026amp;#34;storage-driver\u0026amp;#34;: \u0026amp;#34;overlay2\u0026amp;#34;, \u0026amp;#34;storage-opts\u0026amp;#34;: [ \u0026amp;#34;overlay2.override_kernel_check=true\u0026amp;#34; ] } EOF systemctl restart docker Step 9: Configuring System for kubernetes installation cat \u0026amp;lt;\u0026amp;lt;EOF | sudo tee /etc/modules-load.d/k8s.conf overlay …","date":1670772375,"description":"Kubernetes Operations Fundamentals","lastmod":"2022-12-11T15:26:15Z","objectID":"2bf604cc1fb5f7fddf2654d58b89db2e","permalink":"https://k8sops.ir/session1/scratch_ubuntu/","publishdate":"2022-12-11T15:26:15Z","title":"Create Lab from scratch on ubuntu 22.04"},{"content":"Step 0: You need virtualbox installed on your system Step 1: Download and install Vagrant You can download vagrant from hashicorp.\nClick Here to Go to Download Page\nStep 2: Download k8sops vagrant box Download box file from following link.\nClick Here to Go to Start Download\nStep 3: Import downloded box to box cache vagrant box add package.box --name oracle_kube Step 4(Optional): Verify box imported successfully vagrant box list Step 5: Create instance from box Create new empty folder for lab and create file with \u0026amp;lsquo;Vagrant\u0026amp;rsquo; name and insert following Content into it.\nVagrant.configure(\u0026amp;#34;2\u0026amp;#34;) do |config| config.vm.box = \u0026amp;#34;oracle_kube\u0026amp;#34; config.vm.define \u0026amp;#34;k8sops\u0026amp;#34; do |k8sops| k8sops.vm.network \u0026amp;#34;private_network\u0026amp;#34;, ip:\u0026amp;#34;192.168.57.50\u0026amp;#34; k8sops.vm.hostname = \u0026amp;#34;k8sops\u0026amp;#34; k8sops.vm.provider \u0026amp;#34;virtualbox\u0026amp;#34; do |vm1| vm1.name = \u0026amp;#34;k8sops\u0026amp;#34; vm1.memory = \u0026amp;#34;4096\u0026amp;#34; vm1.cpus = 2 vm1.customize [\u0026amp;#34;modifyvm\u0026amp;#34;, :id, \u0026amp;#34;--audio\u0026amp;#34;, \u0026amp;#34;none\u0026amp;#34;] end end end After create file open command prompt and then enter following command.\nvagrant up After successfully machine is up and running, you can use following command to ssh to the machine.\nvagrant ssh ","date":1670772375,"description":"Kubernetes Operations Fundamentals","lastmod":"2022-12-11T15:26:15Z","objectID":"71e48f2434727c510366e019a20297da","permalink":"https://k8sops.ir/session1/vagrant/","publishdate":"2022-12-11T15:26:15Z","title":"Create Lab with Vagrant"},{"content":"Kubernetes Pod And Replicaset Creating a simple Pod in Kubernetes Exposing port from simple Pod in Kubernetes Explaining Pod manifest structure ","date":1673714220,"description":"Kubernetes Pod And Replicaset","lastmod":"2023-01-14T16:37:00Z","objectID":"ecde588706fe50e7d9229e8b7bca277b","permalink":"https://k8sops.ir/session6/","publishdate":"2023-01-14T16:37:00Z","title":"Session 6"},{"content":" Every Kubernetes resource manifest inlude following sections\napiVersion kind metadata spec You can see some example bellow.\nPod example:\napiVersion: v1 kind: Pod metadata: name: app spec: containers: - name: app image: nginx Replicaset example:\napiVersion: apps/v1 kind: ReplicaSet metadata: name: nginx-deployment spec: replicas: 3 selector: matchLabels: app: nginx template: metadata: labels: app: nginx spec: containers: - name: nginx image: nginx:latest ports: - containerPort: 80 ","date":1673714100,"description":"","lastmod":"2023-01-14T16:35:00Z","objectID":"271a777552d20cb2498c983a4c2ca74f","permalink":"https://k8sops.ir/session6/expain_pod_manifest/","publishdate":"2023-01-14T16:35:00Z","title":"Explaining Pod manifest structure"},{"content":" The following example is a simple manifest to create Pod and expose port.\napiVersion: v1 kind: Pod metadata: name: app spec: containers: - name: app image: nginx # Following lines were added ports: - name: http containerPort: 80 You can create a file with .yml extension and paste the above yml manifest and use kubectl to create a simple Nginx Pod resource.\nkubectl apply -f expose-port-example.yml You can also create the above resource directly from the site content.\nkubectl apply -f https://k8sops.ir/session6/expose-port-example.yml ","date":1673714160,"description":"","lastmod":"2023-01-14T16:36:00Z","objectID":"1d16ba0dbbbb9aea8cca9779eb0ef03d","permalink":"https://k8sops.ir/session6/expose_port/","publishdate":"2023-01-14T16:36:00Z","title":"Exposing port from simple Pod in Kubernetes"},{"content":" With liveness probe Kubernetes can check a container is still alive.\nFollowing example is a HTTP Get liveness probe.\napiVersion: v1 kind: Pod metadata: name: app spec: containers: - name: app image: k8sops-pod-example ports: - containerPort: 80 # Following lines were added livenessProbe: httpGet: path: / port: 80 initialDelaySeconds: 15 Kubernetes can probe a container using one of the three mechanisms:\nHTTP Get TCP Socket Exec initialDelaySeconds Kubernetes with this option will wait 15 seconds before executing the first probe.\nYou can create a file with .yml extension and paste the above yml manifest and use kubectl to create a simple Nginx Pod resource with liveness probe support.\nkubectl apply -f liveness-example.yml You can also create the above resource directly from the site content.\nkubectl apply -f https://k8sops.ir/session6/liveness-example.yml ","date":1673714040,"description":"","lastmod":"2023-01-14T16:34:00Z","objectID":"90e6a6ad1fd97f70e1a39ac2dfd2066f","permalink":"https://k8sops.ir/session6/liveness_probe/","publishdate":"2023-01-14T16:34:00Z","title":"Checking Pod with liveness probe in Kubernetes"},{"content":" The following example is a simple manifest to create Pod.\napiVersion: v1 kind: Pod metadata: name: app spec: containers: - name: app image: nginx You can create a file with .yml extension and paste the above yml manifest and use kubectl to create a simple Nginx Pod resource.\nkubectl apply -f pod-example.yml You can also create the above resource directly from the site content.\nkubectl apply -f https://k8sops.ir/session6/pod-example.yml ","date":1673714220,"description":"","lastmod":"2023-01-14T16:37:00Z","objectID":"6cf129b38cd0279fde60b5013826f77f","permalink":"https://k8sops.ir/session6/simple_pod/","publishdate":"2023-01-14T16:37:00Z","title":"Creating a simple Pod in Kubernetes"}]